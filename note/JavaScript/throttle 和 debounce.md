## å‰è¨€
> throttle å’Œ debounceæ˜¯æ§åˆ¶é¢‘ç‡çš„é«˜é˜¶å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªåŒ…è£…åçš„åŒ¿åå‡½æ•°

åœ¨å®é™…å·¥ä½œä¸­çš„å¾ˆå¤šåœºæ™¯ä¸‹éƒ½ä¼šä½¿ç”¨åˆ°è¿™ä¸¤ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå¹¶ä¸”åœ¨javascriptä¸­åˆ©ç”¨äº†é—­åŒ…è¿™ä¸€ç‰¹æ€§ã€‚ä¸‹é¢å¯¹è¿™ä¸¤ä¸ªå‡½æ•°è¿›è¡Œè¯¦ç»†è®²è§£
åº”ç”¨åœºæ™¯:

* resize é‡æ–°è®¡ç®—æ ·å¼å¸ƒå±€   --debounce
* inputè¾“å…¥åœæ­¢1sæ—¶ï¼Œè·å–ajaxè¯·æ±‚     --debounce
* scroll è®¡ç®—å½“å‰æ˜¯å¦å¤§äºå›ºå®šå€¼ï¼Œæ˜¾ç¤ºå¤´éƒ¨   --throttle


## throttle

throttleä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºèŠ‚æµå‡½æ•°ï¼Œä¸»è¦ç”¨äºæ§åˆ¶ä¸€æ®µæ—¶é—´å†…ï¼Œåªå…è®¸æ‰§è¡Œä¸€æ¬¡æŒ‡å®šå‡½æ•°ã€‚ç±»ä¼¼äºæ‰“å¼€é˜€é—¨çš„æ°´é¾™å¤´ï¼Œæ¯è¿‡å›ºå®šçš„æ—¶é—´å†…ï¼Œæ»´å‡ºä¸è¶…è¿‡ä¸€æ»´æ°´

ä¸»è¦åœºæ™¯ç”¨äº:

* scroll
* resize
* mouse move

åœ¨æˆ‘ä»¬çš„å®é™…å·¥ä½œä¸­ï¼ŒåŸºäºæ€§èƒ½å’Œæ•ˆç‡ä¸Šçš„è€ƒè™‘ï¼Œè¦é™åˆ¶å‡½æ•°çš„æ‰§è¡Œé¢‘ç‡å¯ä»¥ä½¿ç”¨throttle

ä»¥åœ°é“ä¸ºä¾‹è¿›è¡Œè¯´æ˜:

æŸä¸ªå‡½æ•°å»ä¹˜ååœ°é“ï¼Œå¿…é¡»ç­‰å¾…ğŸš‡åˆ°ç«™åï¼Œæ‰èƒ½ä¸Šè½¦ã€‚ğŸš‡åˆ°ç«™å‡½æ•°å¯ä»¥ä¸Šè½¦ï¼Œä½†åœ¨å›ºå®šæ—¶é—´ç‚¹åï¼Œä¸ç®¡æœ‰æ²¡æœ‰äººç»§ç»­ä¸Šè½¦ï¼ŒğŸš‡å°†ä¼šå‘è½¦ã€‚

åœ¨å®é™…å·¥ä½œä¸­çš„åº”ç”¨ï¼Œåˆ—å¦‚:

æ·˜å®ç½‘éœ€è¦åœ¨ç”¨æˆ·æ»‘åŠ¨æ»šè½®ï¼Œè·ç¦»é¡¶éƒ¨500pxæ—¶ï¼Œéšè—é¡¶éƒ¨å¯¼èˆªæ ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹ç”¨æˆ·çš„æ»‘åŠ¨äº‹ä»¶è¿›è¡Œç›‘å¬ï¼Œå½“ç”¨æˆ·è¿›è¡Œæ»‘åŠ¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è·å–åˆ°ç”¨æˆ·å½“å‰æ»‘åŠ¨çš„è·ç¦»ï¼Œä¸500pxè¿›è¡Œæ¯”è¾ƒã€‚å½“ç”¨æˆ·çš„æ»‘åŠ¨è·ç¦»å¤§äºç­‰äº500æ—¶ï¼Œæ‰§è¡Œéšè—æ“ä½œã€‚

é€šå¸¸å®ç°:

```
window.addEventListener("scroll", () => {
    let scrollTop = document.documentElement.scrollTop
    if (scrollTop >= 500) {
       // éšè—å¤´éƒ¨é€»è¾‘
    }
})
```
ä½†æ˜¯æ»šåŠ¨äº‹ä»¶çš„è§¦å‘é¢‘ç‡éå¸¸é«˜ï¼Œè¿™æ ·å°†ä¼šé€ æˆæ€§èƒ½ä¸Šçš„æµªè´¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡throttleå‡½æ•°æ¥æ§åˆ¶é¢‘ç‡ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶ç”¨æˆ·åœ¨æ»šåŠ¨æ»šè½®æ—¶ï¼Œåœ¨500æ¯«ç§’å†…åªè§¦å‘ä¸€æ¬¡æ£€æµ‹ï¼Œå½“å‰ç”¨æˆ·è·ç¦»æ˜¯å¦è·ç¦»é¡¶éƒ¨å¤§äºç­‰äº500

å…·ä½“å®ç°:


```
# throttleå‡½æ•°
function throttle(fn,delay = 250){
    let timer;
    let last;
    
    return function () {
        let now = +new Date();
        if (last && last + delay > now) {
            clearTimeout(timer);
            timer = setTimeout(function () {
                last = now;
                fn.apply(this, arguments);
            },delay)
        } else {
            last = now;
            fn.apply(this, arguments);
        }
    }
}
```


## debounce


debounceæ›´ç±»ä¼¼äºæŒ‰å‹çš„å¼¹ç°§ï¼Œå½“ä½ ç”¨åŠ›æŒ‰å‹æ—¶ï¼Œå¼¹ç°§æ˜¯ä¸ä¼šå¼¹èµ·çš„ã€‚ä¹Ÿå¯ä»¥æ¯”å–»æˆç”µæ¢¯ï¼Œç”µæ¢¯åœ¨ä¸€å±‚åœç•™æ—¶ï¼Œåªè¦æœ‰äººè¿›å…¥å°±ä¼šä¸€ç›´é™·å…¥ç­‰å¾…è¿›å…¥çŠ¶æ€ï¼Œç­‰åˆ°æ²¡æœ‰äººè¿›å…¥æ—¶å°±ä¼šç§»åŠ¨ã€‚

ä¾‹:

```
ä»¥è¾“å…¥æ¡†çš„è¾“å…¥äº‹ä»¶ä¸ºä¾‹ï¼Œæ·˜å®ç½‘æœ‰ä¸€ä¸ªé“¶è¡Œå¡æ·»åŠ é¡µé¢ï¼Œå½“ç”¨æˆ·åœ¨è¾“å…¥æ¡†è¾“å…¥é“¶è¡Œå¡æ—¶ï¼Œä¼šé€šè¿‡ajaxè¯·æ±‚è·å–å½“å‰é“¶è¡Œå¡ç±»å‹ï¼Œå¹¶æ£€æµ‹æ˜¯å¦æ”¯æŒã€‚è‹¥ç”¨æˆ·æ¯è¾“å…¥ä¸€ä¸ªæ•°å­—å°±è¿›è¡Œæ ¡éªŒï¼Œä¼šé€ æˆæ€§èƒ½ä¸Šçš„æµªè´¹ï¼Œå¯ä»¥é€šè¿‡debounceé˜²æŠ–å‡½æ•°ï¼Œè®¾ç½®ç”¨æˆ·åœæ­¢è¾“å…¥ä¸€ç§’åï¼Œå¯¹é“¶è¡Œå¡è¿›è¡Œæ ¡éªŒè¯†åˆ«ã€‚
```

å…·ä½“å®ç°:


```
function debounce(fn, delay = 1000) {
    var timer;
    var context = this;
    return function() {
        if (timer) {
            clearTimeout(timer);
            timer = setTimeout(function() {
                fn.apply(context,arguments);
            }, delay)
        } else {
            timer = setTimeout(function() {
                fn.apply(context,arguments);
            }, delay)
        }
    }
}
```


